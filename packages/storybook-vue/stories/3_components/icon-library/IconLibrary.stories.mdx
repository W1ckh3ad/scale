import { Meta, Canvas, Story, Props } from "@storybook/addon-docs/blocks";
import index from '@scaleds/icons-telekom/dist/scale-icons/scale-icons.json';
import ExampleIcon from './ExampleIcon.vue';

<Meta
  title="Components/Icon Library"
  component={ExampleIcon}
  argTypes={{
    color: { control: 'color' },
    size: { control: 'number' },
    selected: { control: 'boolean' },
    decorative: { control: 'boolean' },
    accessibilityTitle: { control: 'text' }
  }}
/>

# Icon Library

There's an icon library available as a separate npm package.

<p>It features a total of {index.reduce((acc, x) => acc + x.items.length, 0)} icons as standalone components.</p>

## Usage

Install with `yarn` or `npm`.

```bash
yarn add @scaleds/icons-telekom
```

Load the library the same way you load the components library. In the following snippet we're loading both. Components will be lazy-loaded, thanks to [Stencil](https://stenciljs.com/).

```js
import { applyPolyfills, defineCustomElements } from '@scaleds/components-telekom/loader';
import { defineCustomElements as defineCustomElementsIcons } from '@scaleds/icons-telekom/loader';

applyPolyfills().then(() => {
  defineCustomElements(); // Loads the core component library
  defineCustomElementsIcons(); // Loads the icon library
});
```

You can then use them following a simple naming convention: `scale-icon-{CATEGORY}-{NAME}`. There's a `selected` state you can activate via the `selected` attribute.

```html
<scale-icon-action-favorite color="#E20074" size="24" selected>
```

---

It's also possible to import and define elements individually.

```js
import { ScaleIconActionFavorite } from '@scaleds/components-telekomy/dist/custom-elements';

customElements.define('scale-icon-action-favorite', ScaleIconActionFavorite);
```

## Example

<Canvas withSource="none">
  <Story name="Example" args={{
    color: '#E20074',
    selected: true,
    size: 24,
    accessibilityTitle: '',
    decorative: false
  }}>
    {() => ExampleIcon}
  </Story>
</Canvas>

<Props story="Example" />

## Full list, grouped by category

<div style={{ marginTop: 16 }}>
  {index.map(category => {
    return (
      <div key={category.category}>
        <h3>{category.label}</h3>
        <div style={{
          display: 'grid',
          gridTemplateColumns: 'repeat(auto-fill, minmax(240px, 1fr))',
          gap: 16,
          marginTop: 32
        }}>
          {category.items.map(item => {
            let markup = () => ({
              __html: `<scale-icon-${category.category}-${item} />`
            })
            return (
              <div key={item}>
                <span>
                  <span style={{ color: '#7C7C7C' }}>{category.category}-</span>{item}
                </span>
                <Canvas mdxSource={markup().__html}>
                  <span dangerouslySetInnerHTML={markup()}></span>
                </Canvas>
              </div>
            )
          })}
        </div>
      </div>
    )
  })}
</div>
