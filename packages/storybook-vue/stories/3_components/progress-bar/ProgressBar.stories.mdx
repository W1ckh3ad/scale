import { Meta, Story, ArgsTable, Canvas, Description } from '@storybook/addon-docs/blocks';
import ScaleProgressBar from './ScaleProgressBar.vue';
export const ICON_CIRCLE_CLOSE = 'M12 1c6.1 0 11 4.9 11 11s-4.9 11-11 11S1 18.1 1 12 5.9 1 12 1zm0 1.5c-5.25 0-9.5 4.25-9.5 9.5s4.25 9.5 9.5 9.5 9.5-4.25 9.5-9.5-4.25-9.5-9.5-9.5zM7.95 7.95c.3-.3.75-.3 1.05 0l3 3 3-3c.3-.3.75-.3 1.05 0s.3.75 0 1.05l-3 3 3 3c.3.3.3.75 0 1.05s-.75.3-1.05 0l-3-3-3 3c-.3.3-.75.3-1.05 0s-.3-.75 0-1.05l3-3-3-3c-.3-.3-.3-.75 0-1.05z';

<Meta
  title="Components/Progress Bar"
  component={ScaleProgressBar}
  argTypes={{}}
/>

export const Template = (args, {argTypes}) => ({
    components:{ ScaleProgressBar },
    props: {
        ...ScaleProgressBar.props
    },
    template: `
      <scale-progress-bar
        :icon="icon"
        :custom-color="customColor"
        :disabled="disabled"
        :label="label"
        :has-error="hasError"
        :status-inside="statusInside"
        :status-description="statusDescription"
        :show-status="showStatus"
        :stroke-width="strokeWidth"
        :percentage="percentage"
        :styles="styles"
      >
      </scale-progress-bar>
  `
})

export const TemplateInteractive = (args, {argTypes}) => ({
    components:{ ScaleProgressBar },
    template: `
      <div>
          <scale-progress-bar
            label="Download progress example"
            :icon="$data[$data.state].icon"
            :custom-color="$data[$data.state].customColor"
            :has-error="$data[$data.state].hasError"
            :status-inside="$data[$data.state].statusInside"
            :status-description="$data[$data.state].statusDescription"
            :show-status="$data[$data.state].showStatus"
            :percentage="$data.percentage"
          >
          </scale-progress-bar>
          <scale-button variant="secondary" size="small" @click="startSuccess">Start Success</scale-button>
          <scale-button variant="secondary" size="small" @click="startFailure">Start Failure</scale-button>
          <scale-button variant="secondary" size="small" @click="reset">Reset</scale-button>
      </div>
  `,
    methods: {
        startSuccess() {
            this.start('success');
        },
        startFailure() {
            this.start('failure');
        },
        start(outcome) {
            const xxx = setInterval(()  => {
                if (this.$data.percentage === 100) {
                    clearInterval(this.interval);
                    this.$data.state = outcome;
                    this.interval = null;
                    return;
                }
                this.$data.percentage += 1;
            }, 100);
            this.interval = xxx;
            return xxx;
        },
        reset() {
            clearInterval(this.interval);
            this.interval = null;
            this.$data.state = 'initial';
            this.$data.percentage = 0;
        }
    },
    data: () => ({
        interval: null,
        success: {
            showStatus: false,
            icon: 'm22.4 5.05c-.3-.3-.75-.3-1.05 0l-12.35 12.35-5.9-5.9c-.3-.3-.75-.3-1.05 0s-.3.75 0 1.05l6.95 6.95 13.4-13.4c.3-.3.3-.75 0-1.05z',
            statusDescription: 'Upload complete',
            customColor: "#67c23a",
        },
        failure: {
            showStatus: false,
            hasError: true,
            icon: ICON_CIRCLE_CLOSE,
            statusDescription: 'Upload fail',
        },
        initial: {
            showStatus: true,
        },
        percentage: 0,
        state: 'initial',
        busy: false,
    })
})

<div style={{display: 'inline-flex', alignItems: 'center', justifyContent: 'space-between', width: '100%'}}>
    <h1>Progress Bar</h1>
    <img src="assets/aa.png" alt="Accessible AA" />
</div>

## Standard

<Canvas withSource="none">
  <Story
    name="Determinate"
    args={{
      percentage: 20,
      label: 'Determinate',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story='Determinate' />


## Progress custom

<Canvas withSource="none">
  <Story
    name="Progress custom"
    args={{
      percentage: 20,
      customColor: "#009DE0",
      label:"Progress custom"
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

```html
<scale-progress-bar percentage="20" custom-color="#009DE0" label="Progress custom"></scale-progress-bar>
```


## Progress with description

<Canvas withSource="none">
  <Story
    name="Progress with description"
    args={{
      percentage: 40,
      statusDescription: 'Progress status description text',
      label: 'Progress with description'
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

```html
<scale-progress-bar percentage="40" stroke-width="40" status-description="Progress status description text"></scale-progress-bar>
```


## Complete default

<Canvas withSource="none">
  <Story
    name="Complete default"
    args={{
      percentage: 100,
      showStatus: false,
      icon: 'm22.4 5.05c-.3-.3-.75-.3-1.05 0l-12.35 12.35-5.9-5.9c-.3-.3-.75-.3-1.05 0s-.3.75 0 1.05l6.95 6.95 13.4-13.4c.3-.3.3-.75 0-1.05z',
      statusDescription: 'Upload complete',
      label: 'Complete default'
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

```html
<scale-progress-bar percentage="40" icon="SVG-PATH" show-status="false" status-description="Upload complete" label="Complete default"></scale-progress-bar>
```


## Complete green

<Canvas withSource="none">
  <Story
    name="Complete green"
    args={{
      percentage: 100,
      showStatus: false,
      icon: 'm22.4 5.05c-.3-.3-.75-.3-1.05 0l-12.35 12.35-5.9-5.9c-.3-.3-.75-.3-1.05 0s-.3.75 0 1.05l6.95 6.95 13.4-13.4c.3-.3.3-.75 0-1.05z',
      statusDescription: 'Upload complete',
      customColor: "#67c23a",
      label: 'Complete green'
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

```html
<scale-progress-bar label="Complete green" percentage="40" icon="SVG-PATH" show-status="false" status-description="Upload complete" custom-color="#67c23a"></scale-progress-bar>
```


## Complete error

<Canvas withSource="none">
  <Story
    name="Complete error"
    args={{
      percentage: 0,
      hasError: true,
      showStatus: false,
      icon: ICON_CIRCLE_CLOSE,
      statusDescription: 'Upload fail',
      label: 'Complete error'
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

```html
<scale-progress-bar percentage="40" has-error icon="SVG-PATH" show-status="false" status-description="Upload fail" label="Complete error"></scale-progress-bar>
```


## Interactive

<Canvas withSource="none">
  <Story
    name="Interactive"
    args={{
      percentage: 0,
      hasError: true,
      showStatus: false,
      icon: ICON_CIRCLE_CLOSE,
      statusDescription: 'Upload fail',
      label: 'Interactive'
    }}
  >
    {TemplateInteractive.bind({})}
  </Story>
</Canvas>

```html
<scale-progress-bar percentage="40" has-error icon="SVG-PATH" show-status="false" status-description="Upload fail" label="Interactive"></scale-progress-bar>
```
